# 開発者向け仕様書：邦ロック一覧システム

---

## 1．データ構造（Data Structure）

### 1.1 Artists（アーティスト）テーブル

| 論理名       | 物理名       | 型       | 制約                  | 説明                                   |
|--------------|--------------|----------|------------------------|----------------------------------------|
| ID           | id           | Integer  | PK, Auto Increment     | システム内で一意となる識別子．         |
| アーティスト名 | name         | String   | Not Null, Max 50 chars | アーティストの名称（例：Official髭男dism）． |
| 結成日       | formed_on    | Date     | -                      | グループが結成された日付．            |
| 作成日時     | created_at   | Datetime | 自動生成              | レコードの登録日時．                  |
| 更新日時     | updated_at   | Datetime | 自動更新              | レコードの最終更新日時．              |

---

## 2．ページ遷移（Page Transitions）

### 2.1 画面遷移概要

* **一覧画面 (/artists)**  
  * 「アーティスト名」リンク → **詳細画面**  
  * 「編集」ボタン → **編集画面**  
  * 「新規登録」ボタン → **新規登録画面**

* **詳細画面 (/artists/{id})**  
  * 「編集」 → **編集画面**  
  * 「戻る」 → **一覧画面**

* **新規登録／編集画面**  
  * 「保存」 → 成功：一覧画面または詳細画面．失敗：同画面再描画．  
  * 「戻る」 → 一覧画面．

### 2.2 遷移トリガー

* **詳細ページへの遷移：**  
  一覧画面の「アーティスト名」テキストがリンクとなり，クリックすると `/artists/{id}` へ遷移する．

* **削除：**  
  「削除」ボタン押下 → `confirm()` ダイアログ表示 → OK 時に DELETE リクエストを送信 → 一覧画面へ遷移．

---

## 3．HTTP メソッドとリソース名（HTTP Methods & Resources）

| 機能             | メソッド | URL | 説明 |
|------------------|----------|-----|------|
| 一覧表示         | GET      | /artists | アーティスト一覧を表示する． |
| 詳細表示         | GET      | /artists/{id} | 該当アーティストの詳細を表示する． |
| 新規作成フォーム | GET      | /artists/new | 新規登録画面を表示する． |
| 新規登録処理     | POST     | /artists | 入力内容を保存する． |
| 編集フォーム     | GET      | /artists/{id}/edit | 編集画面を表示する． |
| 更新処理         | PUT／PATCH | /artists/{id} | 変更内容を保存する． |
| 削除処理         | DELETE   | /artists/{id} | データを削除する． |

---

## 4．CRUD 操作後の表示内容（Post-Action Behavior）

### 4.1 新規追加（Create）

**成功時：**
- 遷移先：一覧 `/artists`．
- メッセージ：  
  `新しいアーティスト「◯◯」を登録しました．`
- 一覧に新しいレコードが表示されていること．

**失敗時：**
- 遷移なし（同画面再描画）．  
- 入力値保持，エラー部分を赤文字で表示．

---

### 4.2 更新（Update）

**成功時：**
- 遷移先：詳細 `/artists/{id}`．
- メッセージ：  
  `アーティスト情報を更新しました．`
- 最新の内容が表示される．

**失敗時：**
- 遷移なし．  
- 入力値保持，エラー表示あり．

---

### 4.3 削除（Delete）

**成功時：**
- 遷移先：一覧 `/artists`．
- メッセージ：  
  `アーティストデータを削除しました．`
- 目的のデータが一覧から消えている．

---

## 5．リソースごとの機能詳細（Resource Details）

### 5.1 一覧画面（GET /artists）

* 表示項目：ID，アーティスト名，結成日，操作リンク（詳細／編集／削除）．
* 検索機能：アーティスト名の部分一致検索．
* ページネーション：1ページにつき20件を表示．
* 削除ボタン：確認ダイアログあり．

---

### 5.2 詳細画面（GET /artists/{id}）

* 表示項目：ID，アーティスト名，結成日，作成日時，更新日時．
* 操作：編集，削除，戻る．

---

### 5.3 入力画面（新規・編集共通）

**バリデーション：**
- アーティスト名：必須，最大50文字．
- 結成日：任意．ただし入力時は正しい日付形式であること．

---
